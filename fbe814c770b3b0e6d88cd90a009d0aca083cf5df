{
  "comments": [
    {
      "key": {
        "uuid": "c940b1de_f1985b09",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1000044
      },
      "writtenOn": "2021-09-07T01:53:49Z",
      "side": 1,
      "message": "It would be better to add some error path of the script, e.g.\n\n ./overlay add /path/not/exist\n ./overlay remove /path/not/exist\n\nso we know it does no harm to the system in case of error.",
      "revId": "fbe814c770b3b0e6d88cd90a009d0aca083cf5df",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88dc8eb3_f8191d12",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-09-07T03:43:44Z",
      "side": 1,
      "message": "Hmm, I expect the mount will fail? It\u0027s easier to not try to save the user from themselves, and the general rule of this repo is you should know what you\u0027re doing :)",
      "parentUuid": "c940b1de_f1985b09",
      "revId": "fbe814c770b3b0e6d88cd90a009d0aca083cf5df",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8cf06f7e_8f03d69e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-09-07T04:01:35Z",
      "side": 1,
      "message": "e.g:\n\n```\nroot@p10bmc:~# ./overlay add /foo/bar/baz\nmount: /foo/bar/baz: mount point does not exist.\nroot@p10bmc:~# \n```\n\nPerhaps the script should clean up the temporary directories?",
      "parentUuid": "88dc8eb3_f8191d12",
      "revId": "fbe814c770b3b0e6d88cd90a009d0aca083cf5df",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e965961_821aa991",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1000044
      },
      "writtenOn": "2021-09-07T04:05:04Z",
      "side": 1,
      "message": "The script contains `rm -rf` so we need to make sure it does not delete files unexpectedly.",
      "parentUuid": "88dc8eb3_f8191d12",
      "revId": "fbe814c770b3b0e6d88cd90a009d0aca083cf5df",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "79c17212_2e90e9bd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2021-09-07T04:45:00Z",
      "side": 1,
      "message": "the `rm -rf` invocations can\u0027t execute if the mountpoint doesn\u0027t exist:\n\n```\nroot@bmc:~# sh -x ./overlay remove /foo/bar/baz\n+ set -eu\n+ \u0027[\u0027 2 -lt 2 \u0027]\u0027\n+ case $1 in\n+ o_lowerdir\u003d/foo/bar/baz\n++ fstab_mountpoint_options /foo/bar/baz\n++ awk \u0027\"/foo/bar/baz\" \u003d\u003d $2 { print $4 }\u0027\n+ o_options\u003d\n+ umount /foo/bar/baz\numount: /foo/bar/baz: no mount point specified.\n```\n\nThat said, it could possibly do with some safety for mountpoints that aren\u0027t overlay mountpoints.",
      "parentUuid": "6e965961_821aa991",
      "revId": "fbe814c770b3b0e6d88cd90a009d0aca083cf5df",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43c0995a_c8bcc4b1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 27,
      "author": {
        "id": 1000044
      },
      "writtenOn": "2021-09-08T08:46:58Z",
      "side": 1,
      "message": "Yeah, such result is better to be put in the commit message to show it will not accidentally remove the unexpected files.",
      "parentUuid": "79c17212_2e90e9bd",
      "revId": "fbe814c770b3b0e6d88cd90a009d0aca083cf5df",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}